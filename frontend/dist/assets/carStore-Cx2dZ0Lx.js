import{i as u,k as n,t as i}from"./index-DekZCvHk.js";const d=(t,c)=>t.filter(r=>{const e=c.searchTerm===""||r.make.toLowerCase().includes(c.searchTerm.toLowerCase())||r.model.toLowerCase().includes(c.searchTerm.toLowerCase()),a=c.maxPrice===""||r.pricePerDay<=Number(c.maxPrice),s=c.location===""||r.location.toLowerCase().includes(c.location.toLowerCase());return e&&a&&s}),C=u((t,c)=>({cars:[],filteredCars:[],filters:{searchTerm:"",maxPrice:"",location:""},car:null,isLoading:!1,setFilters:r=>{const e={...c().filters,...r},a=d(c().cars,e);t({filters:e,filteredCars:a})},fetchCars:async()=>{var r,e;t({isLoading:!0});try{const s=(await n.get("/cars")).data,o=d(s,c().filters);t({cars:s,filteredCars:o,isLoading:!1})}catch(a){const s=((e=(r=a.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to fetch cars";t({isLoading:!1}),i.error(s)}},fetchCarById:async r=>{var e,a;t({isLoading:!0,car:null});try{const s=await n.get(`/cars/${r}`);t({car:s.data,isLoading:!1})}catch(s){const o=((a=(e=s.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to fetch car details";t({isLoading:!1}),i.error(o)}},createCar:async r=>{var e,a;t({isLoading:!0});try{return await n.post("/cars",r),i.success("Car created successfully!"),await c().fetchCars(),!0}catch(s){const o=((a=(e=s.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to create car";return t({isLoading:!1}),i.error(o),!1}},updateCar:async(r,e)=>{var a,s;t({isLoading:!0});try{return await n.put(`/cars/${r}`,e),i.success("Car updated successfully!"),await c().fetchCars(),!0}catch(o){const l=((s=(a=o.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to update car";return t({isLoading:!1}),i.error(l),!1}},deleteCar:async r=>{var e,a;t({isLoading:!0});try{return await n.delete(`/cars/${r}`),i.success("Car deleted successfully!"),await c().fetchCars(),!0}catch(s){const o=((a=(e=s.response)==null?void 0:e.data)==null?void 0:a.message)||"Failed to delete car";return t({isLoading:!1}),i.error(o),!1}}}));export{C as u};
