import{u as b,r as c,j as e,a as x,B as d}from"./index-BiBJDMyJ.js";import{u as N}from"./userStore-BClM56Rl.js";import{T as C,a as T,b as j,c as l,d as v,e as n}from"./table-SmI92jcP.js";import{D,a as y,b as w,c as B,d as U,e as k,T as A}from"./dialog-C6KBrOnU.js";import{B as E}from"./badge-CCaH_Q45.js";import"./Combination-Cv1LpB6i.js";import"./index-DjfAbn_Q.js";const F=()=>{const{users:o,fetchAllUsers:m,deleteUser:f,isLoading:t}=N(),{user:r}=b(),[p,i]=c.useState(!1),[a,h]=c.useState(null);c.useEffect(()=>{m()},[m]);const u=s=>{h(s),i(!0)},g=async()=>{a&&await f(a.id)&&(i(!1),h(null))};return t&&o.length===0?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(x,{className:"h-12 w-12 animate-spin text-primary"})}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"User Management"}),e.jsx(D,{open:p,onOpenChange:i,children:e.jsxs(y,{children:[e.jsxs(w,{children:[e.jsx(B,{children:"Are you absolutely sure?"}),e.jsxs(U,{children:['This will permanently delete the user "',a==null?void 0:a.firstName," ",a==null?void 0:a.lastName,'" and all associated data. This action cannot be undone.']})]}),e.jsxs(k,{children:[e.jsx(d,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsxs(d,{variant:"destructive",onClick:g,disabled:t,children:[t&&e.jsx(x,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete"]})]})]})}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(C,{children:[e.jsx(T,{children:e.jsxs(j,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Email"}),e.jsx(l,{children:"Role"}),e.jsx(l,{className:"text-right",children:"Actions"})]})}),e.jsx(v,{children:o.map(s=>e.jsxs(j,{children:[e.jsxs(n,{children:[s.firstName," ",s.lastName]}),e.jsx(n,{children:s.email}),e.jsx(n,{children:e.jsx(E,{variant:s.role==="admin"?"default":"secondary",className:"capitalize",children:s.role})}),e.jsx(n,{className:"text-right",children:e.jsx(d,{variant:"destructive",size:"icon",onClick:()=>u(s),disabled:s.role==="admin"||s.id===(r==null?void 0:r.id),title:s.role==="admin"?"Cannot delete an admin":"",children:e.jsx(A,{className:"h-4 w-4"})})})]},s.id))})]})})]})};export{F as default};
