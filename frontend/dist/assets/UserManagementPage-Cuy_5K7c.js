import{u as g,r as d,j as e,b as x,B as l,L as N}from"./index-e5McNQoe.js";import{u as C}from"./userStore-C8eKIlIr.js";import{T as v,a as T,b as j,c as n,d as w,e as t}from"./table-Bm7zu1Uw.js";import{C as y,D,a as k,b as A,c as B,d as U,e as E,T as L}from"./dialog-CcjJem-s.js";import{B as S}from"./badge-W0dgiiWF.js";import"./Combination--97WpBTF.js";import"./index-CS41xu9O.js";const I=()=>{const{users:o,fetchAllUsers:m,deleteUser:f,isLoading:r}=C(),{user:c}=g(),[p,i]=d.useState(!1),[a,h]=d.useState(null);d.useEffect(()=>{m()},[m]);const u=s=>{h(s),i(!0)},b=async()=>{a&&await f(a.id)&&(i(!1),h(null))};return r&&o.length===0?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(x,{className:"h-12 w-12 animate-spin text-primary"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Management"}),e.jsx(l,{asChild:!0,children:e.jsxs(N,{to:"/admin/signup",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Create New Admin"]})})]}),e.jsx(D,{open:p,onOpenChange:i,children:e.jsxs(k,{children:[e.jsxs(A,{children:[e.jsx(B,{children:"Are you absolutely sure?"}),e.jsxs(U,{children:['This will permanently delete the user "',a==null?void 0:a.firstName," ",a==null?void 0:a.lastName,'" and all associated data. This action cannot be undone.']})]}),e.jsxs(E,{children:[e.jsx(l,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsxs(l,{variant:"destructive",onClick:b,disabled:r,children:[r&&e.jsx(x,{className:"mr-2 h-4 w-4 animate-spin"}),"Delete"]})]})]})}),e.jsx("div",{className:"border rounded-lg",children:e.jsxs(v,{children:[e.jsx(T,{children:e.jsxs(j,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Email"}),e.jsx(n,{children:"Role"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(w,{children:o.map(s=>e.jsxs(j,{children:[e.jsxs(t,{children:[s.firstName," ",s.lastName]}),e.jsx(t,{children:s.email}),e.jsx(t,{children:e.jsx(S,{variant:s.role==="admin"?"default":"secondary",className:"capitalize",children:s.role})}),e.jsx(t,{className:"text-right",children:e.jsx(l,{variant:"destructive",size:"icon",onClick:()=>u(s),disabled:s.role==="admin"||s.id===(c==null?void 0:c.id),title:s.role==="admin"?"Cannot delete an admin":"",children:e.jsx(L,{className:"h-4 w-4"})})})]},s.id))})]})})]})};export{I as default};
