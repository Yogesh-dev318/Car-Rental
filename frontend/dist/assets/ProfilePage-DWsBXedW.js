import{r as c,j as e,b as n,B as u}from"./index-e5McNQoe.js";import{u as j}from"./index.esm-DYy7PH6Z.js";import{u as N}from"./userStore-C8eKIlIr.js";import{C as w,a as b,b as g,e as v,c as y}from"./card-BmaryIek.js";import{L as t,I as l}from"./label-C1OOFmtH.js";import"./index-CS41xu9O.js";const S=()=>{const{profile:s,fetchUserProfile:o,updateUserProfile:x,isLoading:m}=N(),{register:r,handleSubmit:p,setValue:i,formState:{errors:a}}=j();c.useEffect(()=>{o()},[o]),c.useEffect(()=>{s&&(i("firstName",s.firstName),i("lastName",s.lastName),i("email",s.email))},[s,i]);const f=h=>{const d={...h};d.password||delete d.password,x(d)};return m&&!s?e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-80px)]",children:e.jsx(n,{className:"h-12 w-12 animate-spin text-primary"})}):e.jsx("div",{className:"flex justify-center",children:e.jsxs(w,{className:"w-full max-w-2xl",children:[e.jsxs(b,{children:[e.jsx(g,{children:"My Profile"}),e.jsx(v,{children:"View and update your personal information."})]}),e.jsx(y,{children:e.jsxs("form",{onSubmit:p(f),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"firstName",children:"First Name"}),e.jsx(l,{id:"firstName",...r("firstName",{required:"First name is required"})}),a.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.firstName.message})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"lastName",children:"Last Name"}),e.jsx(l,{id:"lastName",...r("lastName",{required:"Last name is required"})}),a.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.lastName.message})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",type:"email",...r("email",{required:"Email is required"})}),a.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.email.message})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"password",children:"New Password"}),e.jsx(l,{id:"password",type:"password",...r("password"),placeholder:"Leave blank to keep current password"})]}),e.jsxs(u,{type:"submit",className:"w-full",disabled:m,children:[m&&e.jsx(n,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Profile"]})]})})]})})};export{S as default};
